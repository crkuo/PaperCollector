<!DOCTYPE html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paper Collector</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-wEmeIV1mKuiNpC+IOBjI7aAzPcEZeedi5yW5f2yOq55WWLwNGmvvx4Um1vskeMj0" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-p34f1UUtsS3wqzfto5wAAmdvj+osOnFyQFpp4Ua3gs/ZVWx6oOypYoCJhGGScy+8"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">
    <!-- <link rel="stylesheet" href="{% static 'css/styles.css' %}"> -->
</head>

<body>
    <div class="container">
        <h1>Bootstrap Modal + Clear Array on Close 範例</h1>

        <!-- 陣列狀態（純示範） -->
        <p id="arrayInfo">Array current length: 0</p>

        <!-- 按下後，示範一次新增多筆假資料到陣列，並顯示在 Modal -->
        <button id="addItemsBtn" class="btn btn-primary">Add Items</button>
    </div>

    <!-- 2) Modal 結構 -->
    <div class="modal fade" id="myModal" tabindex="-1" aria-labelledby="myModalLabel" aria-hidden="true">
        <!-- 
          使用 'modal-dialog-scrollable' 讓內容溢出時自動顯示捲軸
          搭配 'modal-lg' 使對話框寬一點
        -->
        <div class="modal-dialog modal-dialog-scrollable modal-lg">
            <div class="modal-content">

                <div class="modal-header">
                    <h5 class="modal-title" id="myModalLabel">假資料列表</h5>
                    <!-- 關閉按鈕 (右上角的 X)；Bootstrap 5 中預設帶 data-bs-dismiss="modal" -->
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>

                <div class="modal-body">
                    <p>以下是加入陣列的資料，超過一定高度後會自動顯示捲軸。</p>
                    <table class="table table-striped" id="myTable">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Phone</th>
                                <th>City</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- JS 動態插入 tr -->
                        </tbody>
                    </table>
                </div>

                <div class="modal-footer">
                    <button id="cancelBtn" type="button" class="btn btn-secondary">Cancel</button>
                    <button id="okBtn" type="button" class="btn btn-primary">OK</button>
                </div>

            </div>
        </div>
    </div>

    <!-- 3) Bootstrap 5 JS (含 Popper) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>

        // ---- JS 區 ----

        // 模擬資料的陣列
        let paperInfoList = {};

        // 取得 HTML 元素
        const addItemsBtn = document.getElementById("addItemsBtn");
        const arrayInfo = document.getElementById("arrayInfo");
        const okBtn = document.getElementById("okBtn");
        const cancelBtn = document.getElementById("cancelBtn");

        // (關鍵) 取得右上角關閉按鈕
        const closeBtn = document.querySelector("#myModal .btn-close");

        // 初始化 Bootstrap Modal 物件
        const myModalEl = document.getElementById('myModal');
        const myModal = new bootstrap.Modal(myModalEl, {
            backdrop: 'static', // 若想讓點擊背景不關閉 (X 仍會關閉)
            keyboard: false
        });

        // 每次更新 myArray 時，顯示目前長度
        function updateArrayInfo() {
            arrayInfo.textContent = `Array current length: ${paperInfoList.length}`;
        }

        // 產生表格
        function populateModalTable() {
            const tableBody = document.querySelector("#myTable tbody");
            tableBody.innerHTML = ""; // 先清空

            myArray.forEach((item) => {
                const row = document.createElement("tr");
                row.innerHTML = `
              <td>${item.id}</td>
              <td>${item.name}</td>
              <td>${item.email}</td>
              <td>${item.phone}</td>
              <td>${item.city}</td>
            `;
                tableBody.appendChild(row);
            });
        }

        // 模擬產生多筆假資料
        function generateFakeData(count = 20) {
            const fakeNames = ["Alice", "Bob", "Charlie", "David", "Emily",
                "Frank", "Grace", "Henry", "Ivy", "Jack"];
            const fakeCities = ["Taipei", "Taichung", "Tainan", "Kaohsiung", "Tokyo",
                "Osaka", "Seoul", "Busan", "New York", "Boston"];

            let newData = [];
            for (let i = 1; i <= count; i++) {
                const rndName = fakeNames[Math.floor(Math.random() * fakeNames.length)];
                const rndCity = fakeCities[Math.floor(Math.random() * fakeCities.length)];
                newData.push({
                    id: Math.floor(Math.random() * 10000),
                    name: rndName,
                    email: rndName.toLowerCase() + "@example.com",
                    phone: "09" + Math.floor(100000000 + Math.random() * 899999999).toString().slice(-8),
                    city: rndCity
                });
            }
            return newData;
        }

        // 按下按鈕時，模擬一次新增多筆資料到 myArray，並顯示 Modal
        addItemsBtn.addEventListener("click", () => {
            const newItems = generateFakeData(20); // 例如一次產生 20 筆
            myArray = myArray.concat(newItems);
            updateArrayInfo();

            // 產生表格內容
            populateModalTable();
            // 顯示 Modal
            myModal.show();
        });

        // OK 按鈕：模擬儲存 & 清空陣列
        okBtn.addEventListener("click", () => {
            alert("執行儲存動作 (可替換為 AJAX / fetch / 後端呼叫...)");
            myArray = [];
            updateArrayInfo();
            myModal.hide();
        });

        // Cancel 按鈕：直接清空陣列
        cancelBtn.addEventListener("click", () => {
            myArray = [];
            updateArrayInfo();
            myModal.hide();
        });

        // (關鍵) 監聽右上角 X 按鈕的點擊 → 清空陣列
        closeBtn.addEventListener("click", () => {
            myArray = [];
            updateArrayInfo();
            // Bootstrap 5 會自動執行關閉，因為該按鈕帶有 data-bs-dismiss="modal"
        });

        // 首次載入更新顯示
        updateArrayInfo();
    </script>
    <!-- Modal -->
    <!-- <div class="modal fade" id="importFolderModal" tabindex="-1" aria-labelledby="importFolderModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="importFolderModalLabel">Modal title</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    ...
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save changes</button>
                </div>
            </div>
        </div>
    </div> -->


    <div class="container-fluid flex-row d-flex" style="height:100vh;">
        <div id='sidebar' class="d-flex flex-column h-100 gap-2 p-2" style="width: 20vw;">
            <div class="d-flex align-items-center ps-2" style="height: 10vh;">
                <span class="d-flex align-items-center gap-3">
                    <svg id="main_icon" width="50" height="50" viewBox="0 0 320 320" fill="none"
                        xmlns="http://www.w3.org/2000/svg" style="cursor:pointer;">
                        <path
                            d="M252.461 129.323C257.414 131.572 262.101 134.3 267.164 136.346C284.767 143.46 300.593 142.578 318.656 138.383C319.073 141.572 319.394 144.77 319.617 147.978C319.841 151.187 319.966 154.399 319.994 157.614C320.022 160.83 319.953 164.044 319.785 167.255C319.618 170.467 319.353 173.67 318.991 176.866C318.834 178.173 318.66 179.478 318.471 180.782C318.281 182.085 318.076 183.385 317.855 184.683C317.634 185.981 317.397 187.276 317.144 188.569C316.891 189.861 316.623 191.15 316.338 192.436C316.054 193.721 315.754 195.003 315.438 196.282C315.122 197.56 314.791 198.835 314.444 200.105C314.097 201.375 313.734 202.641 313.356 203.902C312.978 205.164 312.585 206.421 312.176 207.673C311.768 208.924 311.344 210.171 310.904 211.413C310.465 212.654 310.011 213.89 309.541 215.121C309.072 216.351 308.587 217.576 308.088 218.795C307.588 220.013 307.074 221.226 306.545 222.432C306.015 223.638 305.472 224.837 304.913 226.03C304.355 227.223 303.782 228.409 303.194 229.588C302.606 230.766 302.005 231.938 301.388 233.102C300.772 234.266 300.142 235.423 299.497 236.571C298.852 237.72 298.194 238.861 297.522 239.994C296.849 241.127 296.163 242.251 295.463 243.367C294.763 244.483 294.049 245.591 293.322 246.689C292.595 247.788 291.855 248.877 291.101 249.958C290.347 251.038 289.58 252.109 288.8 253.171C288.02 254.233 287.227 255.285 286.422 256.328C285.616 257.37 284.798 258.403 283.967 259.425C283.136 260.448 282.293 261.46 281.437 262.462C280.581 263.464 279.713 264.456 278.833 265.436C277.953 266.417 277.061 267.387 276.157 268.346C275.253 269.305 274.338 270.253 273.411 271.19C272.484 272.126 271.545 273.052 270.596 273.966C269.646 274.879 268.686 275.781 267.714 276.672C266.742 277.562 265.76 278.441 264.767 279.307C263.773 280.173 262.769 281.028 261.755 281.87C260.741 282.712 259.717 283.541 258.682 284.358C225.769 310.027 184.667 324.142 142.707 318.924C141.368 318.755 140.032 318.569 138.698 318.367C137.364 318.166 136.033 317.947 134.704 317.712C133.376 317.477 132.05 317.226 130.728 316.958C129.405 316.69 128.087 316.406 126.771 316.106C125.456 315.806 124.144 315.489 122.837 315.156C121.53 314.824 120.227 314.475 118.928 314.11C117.629 313.745 116.335 313.364 115.045 312.967C113.756 312.569 112.472 312.157 111.193 311.728C109.914 311.299 108.64 310.854 107.372 310.394C106.104 309.934 104.842 309.458 103.586 308.966C102.33 308.475 101.08 307.968 99.8365 307.445C98.593 306.923 97.356 306.385 96.1256 305.832C94.8952 305.279 93.672 304.711 92.4559 304.127C91.2397 303.544 90.031 302.946 88.8298 302.333C87.6286 301.719 86.4351 301.091 85.2492 300.448C84.0636 299.806 82.8861 299.148 81.7165 298.476C80.5473 297.804 79.3865 297.118 78.234 296.418C77.0816 295.717 75.9382 295.002 74.8038 294.273C73.6691 293.544 72.5437 292.801 71.4275 292.044C70.3113 291.288 69.2047 290.517 68.1077 289.733C67.0107 288.949 65.9237 288.152 64.8467 287.341C63.7692 286.529 62.7021 285.705 61.6454 284.868C60.5889 284.03 59.5428 283.18 58.507 282.317C57.4716 281.453 56.4468 280.577 55.4327 279.688C54.4189 278.8 53.4162 277.899 52.4245 276.985C51.4332 276.072 50.4532 275.146 49.4846 274.209C48.5161 273.271 47.5594 272.321 46.6147 271.36C45.6696 270.399 44.7367 269.426 43.8162 268.441C42.8953 267.457 41.9868 266.461 41.0908 265.454C40.1948 264.447 39.3114 263.429 38.4406 262.4C37.5695 261.372 36.7116 260.332 35.8668 259.282C35.0216 258.232 34.1898 257.172 33.3714 256.101C6.94079 222.178 -4.00237 181.212 1.30221 138.672C18.3295 142.391 34.9992 142.758 51.6162 136.687C56.647 134.849 61.337 132.401 66.2515 130.313C62.9787 150.266 54.9445 168.567 39.3317 182.006C35.1059 179.778 30.6929 177.871 26.4218 175.726C20.8638 172.934 15.4045 169.903 9.75421 167.302C12.6012 197.223 21.0911 222.436 38.9731 246.82C45.5998 255.582 53.1768 264.061 61.4501 271.304C67.3245 255.808 75.2899 245.921 86.3019 233.916C76.2183 223.945 50.8191 206.764 37.6024 202.123C43.0201 199.756 48.298 197.084 53.6426 194.559C65.4101 188.999 77.0341 183.376 88.5102 177.22C99.4881 182.583 112.254 192.446 121.046 200.97C125.305 188.047 133.698 175.865 142.85 165.923C163.329 170.487 183.95 174.583 204.393 179.294C195.071 187.734 189.133 198.723 184.661 210.296C199.607 194.275 209.822 187.132 229.41 177.078C233.878 179.063 238.157 181.491 242.525 183.687C254.654 189.784 266.654 196.108 278.973 201.821C274.468 204.845 269.229 207.155 264.527 209.912C253.103 216.61 241.291 224.846 231.725 234.025C243.542 245.296 251.55 256.676 257.601 271.87C258.9 270.919 260.1 269.776 261.282 268.683C289.838 242.285 308.168 204.809 309.681 165.824C301.251 172.245 289.973 177.353 280.197 181.552C276.976 178.688 273.874 175.808 271.077 172.516C260.887 160.521 254.36 144.898 252.461 129.323Z"
                            fill="black" />
                        <path
                            d="M146.511 176.608C150.69 177.782 155.141 178.494 159.397 179.407L186.486 185.107C185.05 187.79 183.324 190.313 181.885 192.999C180.199 196.208 178.678 199.494 177.323 202.856C175.968 206.219 174.785 209.641 173.776 213.122C173.068 215.573 170.334 229.225 169.715 229.834L169.023 229.745C163.805 228.403 158.605 227.054 153.314 226.017C148.154 225.005 142.955 224.302 137.775 223.414C135.157 218.314 131.884 213.235 128.348 208.723C131.865 196.609 138.284 186.074 146.511 176.608Z"
                            fill="white" />
                        <path
                            d="M229.447 187.847C232.578 188.995 235.734 191.08 238.727 192.603L258.464 202.615C241.07 212.669 224.925 224.976 211.928 240.39L211.538 240.874C211.354 240.922 211.173 241.055 210.987 241.018C209.619 240.742 203.28 237.113 201.614 236.271C195.597 233.244 189.549 230.281 183.471 227.38C185.071 224.607 187.22 222.061 189.233 219.574C190.599 217.914 192.009 216.291 193.463 214.707C194.917 213.122 196.412 211.577 197.949 210.072C199.485 208.567 201.061 207.104 202.676 205.683C204.291 204.263 205.943 202.886 207.632 201.554C209.321 200.221 211.044 198.935 212.802 197.695C214.56 196.454 216.35 195.262 218.172 194.117C219.994 192.972 221.845 191.877 223.725 190.832C225.606 189.786 227.513 188.791 229.447 187.847Z"
                            fill="white" />
                        <path
                            d="M88.0717 188.291C88.2259 188.331 88.3833 188.358 88.5343 188.409C90.9022 189.213 93.5907 191.642 95.7431 193.027C111.185 202.964 121.952 213.923 130.539 230.234C122.427 233.853 114.56 238.158 106.296 241.409C105.579 240.657 104.901 239.862 104.209 239.087C89.444 222.269 77.8072 214.311 59.0624 202.579C68.843 197.998 78.5771 193.452 88.0717 188.291Z"
                            fill="white" />
                        <path
                            d="M150.829 0.214159C186.436 -1.6579 225.176 8.76491 253.621 30.6352C244.433 40.192 235.09 49.8505 225.431 58.9333C223.192 44.677 218.691 31.3856 211.308 18.9086C198.027 13.9651 184.057 11.3102 169.956 10.2641C151.432 9.00297 125.298 11.7874 108.129 18.8527C100.493 31.2589 96.6016 43.9393 94.3468 58.1925C91.4928 55.6899 88.872 52.7968 86.1653 50.1248C79.3934 43.4403 72.6573 36.6322 65.5675 30.2816C68.9593 27.5446 72.7518 25.3226 76.4658 23.0575C77.8677 22.2132 79.2821 21.3905 80.7092 20.5895C82.1366 19.7885 83.5758 19.0093 85.0267 18.2519C86.4776 17.4949 87.9397 16.76 89.413 16.047C90.8863 15.3344 92.3703 14.6445 93.865 13.9774C95.3596 13.3099 96.8641 12.6652 98.3783 12.0435C99.8925 11.4222 101.416 10.8239 102.948 10.2487C104.481 9.6735 106.022 9.12174 107.571 8.59341C109.121 8.06543 110.678 7.56107 112.243 7.08032C113.808 6.59956 115.38 6.14278 116.958 5.70996C118.537 5.27714 120.122 4.86847 121.714 4.48394C123.305 4.09941 124.902 3.73938 126.504 3.40384C128.106 3.06796 129.714 2.75657 131.326 2.46968C132.937 2.18279 134.553 1.92059 136.173 1.68305C137.793 1.44551 139.416 1.23265 141.043 1.04447C142.669 0.856644 144.298 0.693491 145.929 0.555017C147.561 0.416543 149.194 0.302924 150.829 0.214159Z"
                            fill="black" />
                        <path
                            d="M205.341 106.201C212.109 106.292 218.065 108.417 223.17 112.904C223.496 113.188 223.815 113.481 224.126 113.781C224.438 114.081 224.741 114.388 225.038 114.704C225.334 115.019 225.622 115.341 225.902 115.671C226.182 116.001 226.454 116.337 226.717 116.68C226.981 117.023 227.235 117.372 227.481 117.728C227.727 118.084 227.964 118.446 228.192 118.813C228.42 119.181 228.638 119.554 228.847 119.932C229.056 120.311 229.256 120.694 229.446 121.082C229.636 121.47 229.817 121.863 229.987 122.261C230.158 122.658 230.318 123.059 230.469 123.464C230.619 123.87 230.76 124.278 230.89 124.691C231.02 125.103 231.14 125.518 231.249 125.936C231.358 126.354 231.457 126.775 231.545 127.198C231.634 127.621 231.711 128.046 231.779 128.473C231.846 128.9 231.902 129.329 231.948 129.758C231.994 130.188 232.029 130.619 232.053 131.05C232.48 137.922 230.011 144.345 225.454 149.468C220.488 155.053 214.156 157.736 206.784 158.191C200.414 158.177 194.759 156.621 189.807 152.473C184.135 147.722 180.73 141.262 180.161 133.893C180.126 133.464 180.102 133.033 180.088 132.602C180.075 132.171 180.072 131.74 180.08 131.309C180.087 130.878 180.105 130.447 180.134 130.017C180.164 129.587 180.203 129.158 180.254 128.729C180.305 128.301 180.366 127.874 180.438 127.449C180.509 127.024 180.591 126.6 180.684 126.179C180.777 125.758 180.88 125.34 180.993 124.923C181.107 124.507 181.231 124.094 181.365 123.685C181.499 123.275 181.643 122.868 181.797 122.466C181.951 122.063 182.116 121.664 182.29 121.269C182.463 120.875 182.647 120.484 182.841 120.099C183.034 119.713 183.237 119.332 183.449 118.957C183.662 118.582 183.883 118.212 184.114 117.847C184.345 117.482 184.584 117.124 184.833 116.771C185.081 116.418 185.338 116.072 185.604 115.732C185.87 115.392 186.144 115.059 186.426 114.732C191.281 109.174 198.123 106.678 205.341 106.201Z"
                            fill="black" />
                        <path
                            d="M213.38 122.903C216.438 122.729 219.076 122.932 221.755 124.614C224.634 126.421 226.818 129.447 227.519 132.779C228.153 135.795 227.487 139.179 225.792 141.749C223.941 144.555 220.959 146.271 217.709 146.935C214.867 147.137 212.212 146.962 209.624 145.614C209.438 145.514 209.254 145.41 209.073 145.301C208.892 145.193 208.714 145.08 208.539 144.962C208.364 144.844 208.192 144.722 208.023 144.595C207.854 144.468 207.688 144.338 207.525 144.203C207.363 144.068 207.205 143.929 207.05 143.786C206.894 143.643 206.743 143.496 206.595 143.345C206.448 143.194 206.304 143.039 206.164 142.881C206.025 142.723 205.889 142.561 205.757 142.396C205.626 142.231 205.499 142.063 205.376 141.891C205.253 141.72 205.135 141.545 205.021 141.367C204.907 141.19 204.798 141.009 204.693 140.826C204.588 140.643 204.488 140.457 204.393 140.269C204.298 140.081 204.208 139.89 204.122 139.697C204.037 139.504 203.957 139.309 203.881 139.112C203.806 138.915 203.736 138.717 203.671 138.516C203.605 138.316 203.545 138.113 203.49 137.91C202.666 134.919 202.926 131.681 204.49 128.971C206.48 125.52 209.69 123.925 213.38 122.903Z"
                            fill="white" />
                        <path
                            d="M123.993 98.7413C130.208 98.4042 136.176 100.134 141.109 103.924C141.453 104.185 141.79 104.455 142.12 104.732C142.45 105.01 142.774 105.296 143.089 105.59C143.405 105.884 143.714 106.186 144.015 106.495C144.315 106.804 144.608 107.121 144.893 107.445C145.178 107.769 145.454 108.1 145.722 108.438C145.99 108.776 146.25 109.121 146.5 109.471C146.751 109.823 146.993 110.18 147.226 110.542C147.459 110.906 147.682 111.274 147.897 111.649C148.111 112.023 148.315 112.403 148.51 112.787C148.706 113.172 148.891 113.561 149.066 113.955C149.242 114.349 149.408 114.747 149.563 115.149C149.718 115.551 149.864 115.957 149.999 116.367C150.134 116.776 150.258 117.189 150.373 117.605C150.487 118.02 150.591 118.439 150.684 118.859C150.777 119.28 150.86 119.704 150.932 120.129C151.003 120.554 151.065 120.98 151.115 121.408C151.965 128.11 149.829 135.044 145.708 140.347C140.911 146.518 135.104 149.319 127.444 150.276C120.137 150.43 114.281 148.843 108.577 144.089C103.31 139.701 100.148 133.192 99.5713 126.396C98.9818 119.443 101.255 112.861 105.758 107.567C110.444 102.059 116.885 99.3575 123.993 98.7413Z"
                            fill="black" />
                        <path
                            d="M127.755 116.501C130.216 116.307 132.433 116.329 134.751 117.296C137.869 118.598 140.285 121.247 141.474 124.383C141.548 124.576 141.616 124.769 141.679 124.965C141.742 125.161 141.8 125.358 141.853 125.557C141.906 125.756 141.953 125.955 141.996 126.156C142.038 126.358 142.076 126.56 142.108 126.763C142.14 126.966 142.167 127.17 142.188 127.374C142.21 127.578 142.226 127.783 142.237 127.989C142.248 128.194 142.254 128.4 142.254 128.605C142.255 128.811 142.25 129.016 142.24 129.221C142.23 129.427 142.214 129.632 142.194 129.836C142.173 130.041 142.146 130.244 142.115 130.448C142.084 130.651 142.047 130.853 142.006 131.055C141.964 131.256 141.917 131.456 141.865 131.655C141.813 131.854 141.755 132.051 141.693 132.247C141.631 132.443 141.563 132.637 141.491 132.83C141.419 133.022 141.341 133.213 141.259 133.401C141.177 133.59 141.09 133.776 140.998 133.96C139.287 137.43 136.297 139.484 132.738 140.729C132.399 140.801 132.057 140.859 131.714 140.903C131.37 140.946 131.024 140.976 130.678 140.991C130.331 141.006 129.985 141.006 129.639 140.992C129.292 140.978 128.947 140.949 128.602 140.907C128.258 140.864 127.917 140.806 127.577 140.734C127.238 140.663 126.903 140.578 126.571 140.478C126.238 140.378 125.911 140.265 125.589 140.138C125.266 140.011 124.95 139.871 124.639 139.717C124.45 139.621 124.264 139.519 124.08 139.413C123.896 139.307 123.715 139.197 123.537 139.082C123.359 138.967 123.183 138.847 123.011 138.723C122.839 138.6 122.67 138.472 122.504 138.339C122.339 138.207 122.176 138.071 122.017 137.931C121.858 137.791 121.703 137.647 121.551 137.498C121.399 137.35 121.251 137.199 121.107 137.043C120.963 136.888 120.823 136.729 120.687 136.566C120.55 136.404 120.418 136.238 120.291 136.069C120.163 135.9 120.039 135.728 119.92 135.553C119.801 135.378 119.686 135.199 119.575 135.019C119.465 134.838 119.359 134.654 119.258 134.468C119.157 134.282 119.061 134.093 118.969 133.902C118.877 133.711 118.791 133.518 118.709 133.322C118.627 133.127 118.549 132.93 118.477 132.731C118.405 132.532 118.338 132.331 118.276 132.128C118.216 131.925 118.162 131.722 118.112 131.516C118.063 131.312 118.018 131.105 117.979 130.898C117.94 130.691 117.906 130.482 117.878 130.273C117.849 130.064 117.826 129.855 117.808 129.644C117.79 129.434 117.777 129.224 117.77 129.013C117.762 128.802 117.76 128.591 117.763 128.38C117.766 128.169 117.775 127.958 117.789 127.748C117.803 127.537 117.822 127.327 117.846 127.118C117.871 126.908 117.9 126.699 117.935 126.491C117.97 126.283 118.01 126.076 118.056 125.87C118.101 125.664 118.152 125.459 118.207 125.256C118.263 125.052 118.324 124.85 118.39 124.65C118.455 124.449 118.526 124.25 118.603 124.054C118.678 123.857 118.759 123.662 118.845 123.469C118.931 123.276 119.021 123.086 119.116 122.897C119.212 122.709 119.312 122.523 119.416 122.34C121.286 119.038 124.194 117.425 127.755 116.501Z"
                            fill='white' />
                        <path
                            d="M279.517 54.1049C281.075 55.382 282.492 57.4458 283.807 58.994C293.355 70.237 304.179 86.9779 309.088 100.862C297.543 103.34 286.07 102.975 274.496 100.969C263.664 99.2313 253.169 95.0723 243.422 90.1282C248.501 85.5485 253.258 80.5469 258.063 75.6806C265.143 68.4182 272.294 61.2263 279.517 54.1049Z"
                            fill="black" />
                        <path
                            d="M40.0114 54.0516C41.858 55.0385 47.9235 61.9814 49.8939 64.0026C58.5438 72.7271 67.1148 81.5282 75.6068 90.4057C66.1827 95.7103 56.313 98.8191 45.7812 101.038C34.837 103.168 21.9816 103.656 11.166 100.839C18.115 83.8037 27.5375 67.6662 40.0114 54.0516Z"
                            fill="black" />
                        <path
                            d="M150.026 38.0835C152.229 38.9862 154.859 39.4038 157.203 39.8666C158.702 40.1712 160.208 40.4388 161.72 40.6692C163.232 40.8993 164.749 41.0919 166.271 41.2471C167.793 41.4022 169.317 41.5196 170.845 41.5991C172.373 41.6787 173.901 41.7206 175.431 41.7248C176.96 41.7287 178.489 41.6948 180.017 41.6231C181.545 41.5514 183.07 41.442 184.593 41.295C186.116 41.1477 187.634 40.9629 189.147 40.7406C190.66 40.5183 192.167 40.2588 193.668 39.9619C186.713 50.7501 177.607 59.1922 166.868 66.1303C156.461 72.0756 145.763 76.4588 133.785 77.9942C136.302 72.1049 139.554 66.478 142.111 60.5721C145.262 53.2959 147.56 45.6133 150.026 38.0835Z"
                            fill="black" />
                    </svg>
                    <h3 id="paperTitle" style='text-align: center;
                    font-family: "Roboto", sans-serif;
                    font-optical-sizing: auto;
                    font-weight: 400;'>
                        Paper Collector</h3>
                </span>
            </div>
            <div id="paperList" class="" style="height: 80vh;">
                <div class=" d-flex flex-row border-1  w-100 p-1 gap-1 rounded-2 border border-start">
                    <input id="folderInput" type="file" style="display: none;" webkitdirectory>
                    <button type="button" id="addButton" class="btn col">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                            class="bi bi-plus-lg" viewBox="0 0 16 16">
                            <path fill-rule="evenodd"
                                d="M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2" />
                        </svg>
                    </button>
                    <button type="button" class="btn col">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                            class="bi bi-dash-lg" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M2 8a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11A.5.5 0 0 1 2 8" />
                        </svg>
                    </button>
                    <button type="button" class="btn col">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                            class="bi bi-sliders" viewBox="0 0 16 16">
                            <path fill-rule="evenodd"
                                d="M11.5 2a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3M9.05 3a2.5 2.5 0 0 1 4.9 0H16v1h-2.05a2.5 2.5 0 0 1-4.9 0H0V3zM4.5 7a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3M2.05 8a2.5 2.5 0 0 1 4.9 0H16v1H6.95a2.5 2.5 0 0 1-4.9 0H0V8zm9.45 4a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3m-2.45 1a2.5 2.5 0 0 1 4.9 0H16v1h-2.05a2.5 2.5 0 0 1-4.9 0H0v-1z" />
                        </svg>
                    </button>
                </div>
                <div class="d-flex h-100  border-1 border">
                    <div class="accordion w-100" id="accordionExample">
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="headingOne">
                                <button class="accordion-button text-nowrap  text-dark p-2 ps-1" type="button"
                                    data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true"
                                    aria-controls="collapseOne">
                                    <strong>Recommendation System</strong>
                                </button>
                            </h2>
                            <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne"
                                data-bs-parent="#accordionExample">
                                <div class="accordion-body p-1 ps-2 ">
                                    <button id="arxiv1020" class="btn p-0 bg-transparent text-dark w-100">
                                        <p class="text-truncate m-0 ">20160330 Unsupervised Learning of Visual
                                            Representations
                                            by Solving Jigsaw Puzzles
                                        </p>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="d-flex flex-column gap-2 p-3" style="height:100vh; width:100%;">
            <object class="pdf" data="https://media.geeksforgeeks.org/wp-content/cdn-uploads/20210101201653/PDF.pdf"
                width="100%" height="100%">
            </object>
        </div>
    </div>
    <script>
        const mainIcon = document.getElementById('main_icon');
        const sidebar = document.getElementById('sidebar');
        const paperTitle = document.getElementById('paperTitle');
        const paperList = document.getElementById('paperList');
        let isCollapsed = false;

        mainIcon.addEventListener('click', () => {
            isCollapsed = !isCollapsed;
            if (isCollapsed) {
                paperTitle.classList.add('d-none');
                paperList.classList.add('d-none');
                sidebar.style.width = '60px';
            } else {
                paperTitle.classList.remove('d-none');
                paperList.classList.remove('d-none');
                sidebar.style.width = '20vw';
            }
        });
    </script>

    <script>
        paperFiles = {};
        document.getElementById('addButton').addEventListener('click', function () {
            const inputElem = document.getElementById('folderInput');
            inputElem.click()
        });
        document.getElementById('folderInput').addEventListener('change', function () {
            const inputElem = document.getElementById('folderInput');
            const files = inputElem.files;
            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                if (file.name.toLowerCase().endsWith('.pdf')) {
                    paperFiles[file.name.replace('.pdf', '')] = file
                }
            }
            inputElem.value = "";
            console.log(paperFiles);

            const apiUrl = 'http://127.0.0.1:8000/api/paper/search/paperIds';
            const requestData = { "paperIds": Object.keys(paperFiles) };
            console.log(requestData)
            fetch(apiUrl, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                mode: 'no-cors',
                body: JSON.stringify(requestData)
            }).then(resp => {
                if (!response.ok) {
                    throw new Error('Network response was not ok, status=' + response.status);
                }
                return resp.json();
            }).then(data => {
                Object.assign(paperInfoList, data);
                // updatePaperInfo();
            }).catch(err => {
                console.error(err);
            })
        })

    </script>
</body>